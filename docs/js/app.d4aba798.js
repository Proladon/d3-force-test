(function(e){function t(t){for(var i,r,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/d3-force-test/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("c7cf")},"0c31":function(e,t,n){},"223f":function(e,t,n){},3128:function(e,t,n){"use strict";n("61fe")},"33d9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i,a,s=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home"),n("notifications",{attrs:{position:"top center"}})],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("splitpanes",{staticClass:"default-theme overflow-hidden"},[n("pane",{key:0,attrs:{size:"20"}},[n("LayerPane")],1),n("pane",{directives:[{name:"loading",rawName:"v-loading",value:e.generating,expression:"generating"}],key:1,attrs:{size:"60"}},[n("div",{staticClass:"relative"},[n("network",{attrs:{nodeList:e.nodes,linkList:e.links,showLinkText:"",nodeTextKey:"label",nodeTypeKey:"layer",linkTextKey:"label"},on:{clear:function(t){e.nodes=[],e.links=[]},deleteNode:e.deleteNode,clickNode:e.clickNode,deFocus:e.deFocus}}),n("InputPane")],1)]),n("pane",{key:2,attrs:{size:"20"}},[n("div",{staticClass:"w-full h-full bg-gray-800 text-gray-400 p-5"},[n("DataPane")],1)])],1)],1)},l=[],d=n("5530"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layer-pane"},[n("vs-tabs",[n("vs-tab",{attrs:{label:"Layers"}},[n("section",{staticClass:"layers-wrapper"},[e._l(e.totalLayer,(function(t){return n("div",{key:t,staticClass:"layers-list"},[n("vs-button",{staticClass:"w-full text-gray-600 font-bold ",class:{"de-avtivated":e.activatedLayer!==t},attrs:{color:"#6EE7B7",type:"filled"},on:{click:function(n){return e.selectLayer(t)}}},[e._v(" Layer "+e._s(t)+" ")]),t>1?n("vs-button",{staticClass:"text-gray-700 text-shadow-lg",attrs:{color:"danger",type:"filled",icon:"delete"},on:{click:function(n){return e.deleteLayer(t)}}}):e._e(),1===t&&e.nodes.length?n("vs-button",{staticClass:"text-gray-700 text-shadow-lg",attrs:{color:"danger",type:"filled",icon:"cached"},on:{click:function(t){e.showResetWarningModal=!0}}}):e._e()],1)})),n("vs-button",{directives:[{name:"loading",rawName:"v-loading",value:e.generating,expression:"generating"}],staticClass:"w-full my-[20px] text-gray-700 font-bold",attrs:{disabled:e.disabledAddLayerBtn,color:"primary",type:"gradient"},on:{click:e.addLayer}},[e._v(" + Layer "+e._s(e.totalLayer+1)+" ")])],2)]),n("vs-tab",{attrs:{label:"Settings"}},[n("LayerSettings",{staticClass:" pt-[20px]"})],1),n("vs-tab",{attrs:{label:"Import/Export"}},[n("section",{staticClass:"grid gap-[10px] pt-[20px]"},[n("vs-button",{staticClass:"w-full",attrs:{color:"primary"},on:{click:e.importNodes}},[e._v("Import Nodes")]),n("input",{ref:"nodeImport",staticClass:"hidden",attrs:{id:"import",type:"file",name:""},on:{input:e.importCSV}}),e.nodes.length?e._e():n("vs-button",{staticClass:"w-full",attrs:{disabled:""}},[e._v(" Export ")]),e.nodes.length?n("download-csv",{attrs:{data:e.nodes}},[n("vs-button",{staticClass:"w-full",attrs:{id:"export-btn"}},[e._v("Export")])],1):e._e()],1)])],1),e.showImportWarningModal?n("ImportWarningModalVue",{on:{close:function(t){e.showImportWarningModal=!1},confirm:function(t){return e.$refs["nodeImport"].click()}}}):e._e(),e.showResetWarningModal?n("ResetWarningModalVue",{on:{close:function(t){e.showResetWarningModal=!1},confirm:e.resetLayer}}):e._e()],1)},f=[],h=n("3835"),p=n("b85c"),m=n("1da1"),y=(n("96cf"),n("4e82"),n("caad"),n("2532"),n("99af"),n("a9e3"),n("96e8")),g=n.n(y),b=n("2ef0"),v=n("d4ec"),x=function e(t){var n=t.id,i=t.label,a=t.closeness,s=t.layer;Object(v["a"])(this,e),this.id=n,this.label=i,this.layer=s,this.closeness=a||0},k=x,_={name:"CSV",data:function(){return{showImportWarningModal:!1}},methods:{importNodes:function(){this.nodes.length&&(this.showImportWarningModal=!0),this.nodes.length||this.$refs.nodeImport.click()},parseCSVData:function(e){var t=this,n=[];return Object(b["forEach"])(e,(function(e){var i=new k({id:"1-".concat(e.Label),label:e.Label,closeness:Number(t.closeness)||0,layer:1});n.push(i)})),n},importCSV:function(e){var t=this;this.$store.commit("network/SET_NODES",[]),this.$store.commit("network/SET_LINKS",[]);var n=e.target.files[0],i=new FileReader;i.onload=function(){var e=g()(i.result,{parseNumbers:!0}),n=t.parseCSVData(e);t.$store.commit("network/SET_NODES",n),t.$message.success("Import nodes success")},i.readAsText(n)}}},w=_,N=n("2877"),E=Object(N["a"])(w,i,a,!1,null,null,null),S=E.exports,T=function e(t){var n=t.source,i=t.target,a=t.label,s=t.weight;Object(v["a"])(this,e),this.source=n,this.target=i,this.label=a,this.weight=s||0},L=T,O=n("2f62"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"layer-settings"},[n("div",{staticClass:"grid gap-[10px]"},[n("p",{staticClass:"font-medium"},[e._v("Generate Layer")]),n("vs-select",{staticClass:"test",attrs:{label:"Filter"},model:{value:e.generate,callback:function(t){e.generate=t},expression:"generate"}},e._l(e.options,(function(e,t){return n("vs-select-item",{key:t,attrs:{value:e.value,text:e.text}})})),1),n("vs-input",{staticClass:"test",attrs:{label:"Max relates"},model:{value:e.maxRelates,callback:function(t){e.maxRelates=t},expression:"maxRelates"}}),n("vs-select",{staticClass:"test",attrs:{label:"Source"},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.netData,(function(e,t){return n("vs-select-item",{key:t,attrs:{value:e.text,text:e.text}})})),1)],1)])},C=[],D=function(e){return{get:function(){return this.layerSettings[e]},set:function(t){this.$store.commit("layer/SET_LAYER_SETTINGS",{key:e,value:t})}}},$={name:"LayerSettings",data:function(){return{order:"",net:"",options:[{text:"Most relevant",value:"relate"},{text:"Random",value:"random"}],netData:[{text:"conceptNet"}]}},computed:Object(d["a"])(Object(d["a"])({},Object(O["b"])("layer",["layerSettings"])),{},{generate:D("generate"),source:D("source"),maxRelates:D("maxRelates")})},A=$,R=(n("e0e9"),n("9023"),Object(N["a"])(A,j,C,!1,null,"5c8e4916",null)),I=R.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vs-prompt",{attrs:{title:"Warning",color:"danger",active:e.show},on:{"update:active":function(t){e.show=t},cancel:e.close,accept:e.confirm,close:e.close}},[n("div",{staticClass:"con-exemple-prompt"},[n("vs-alert",{attrs:{color:"danger",icon:"new_releases"}},[e._v(" 將會遺失當前工作階段，是否繼續? ")])],1)])},P=[],M={name:"ImportWarningModal",data:function(){return{show:!0}},methods:{confirm:function(){this.$emit("confirm"),this.$emit("close")},close:function(){var e=this;this.show=!1,setTimeout((function(){e.$emit("close")}),300)}}},F=M,K=(n("f179"),Object(N["a"])(F,z,P,!1,null,"719c44f2",null)),V=K.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vs-prompt",{attrs:{title:"Warning",color:"danger",active:e.show},on:{"update:active":function(t){e.show=t},cancel:e.close,accept:e.confirm,close:e.close}},[n("div",{staticClass:"con-exemple-prompt"},[n("vs-alert",{attrs:{color:"danger",icon:"new_releases"}},[e._v(" 將會重置當前所有工作階段，是否繼續? ")])],1)])},G=[],Y={name:"ResetWarningModal",data:function(){return{show:!0}},methods:{confirm:function(){this.$emit("confirm"),this.$emit("close")},close:function(){var e=this;this.show=!1,setTimeout((function(){e.$emit("close")}),300)}}},B=Y,Z=(n("f6db"),Object(N["a"])(B,W,G,!1,null,"3a2735aa",null)),H=Z.exports,U=n("bc3a"),J=n.n(U),X=J.a.create({baseURL:"https://api.conceptnet.io/c"}),q=function(e){return[e.data,null]},Q=function(e){return[null,e.response||e]};X.interceptors.response.use(q,Q),X.interceptors.request.use(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.headers.Authorization="Bot ".concat(Object({NODE_ENV:"production",BASE_URL:"/d3-force-test/"}).BOT_TOKEN),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var ee={name:"LayerPane",components:{ImportWarningModalVue:V,ResetWarningModalVue:H,LayerSettings:I},mixins:[S],data:function(){return{showResetWarningModal:!1}},computed:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(O["b"])("network",["nodes","links"])),Object(O["b"])("layer",["totalLayer","activatedLayer","generating","layerSettings"])),{},{disabledAddLayerBtn:function(){return this.generating||!this.nodes.length&&0!==this.activatedLayer},preLayer:function(){return 0===this.activatedLayer?0:this.activatedLayer-1},nextLayer:function(){return this.activatedLayer+1}}),methods:{addLayer:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,i,a,s,r,o,c,l,d,u,f,h,m,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAPILayer()){t.next=2;break}return t.abrupt("return");case 2:if(e.$store.commit("layer/SET_GENERATING",!0),e.nodes.length){t.next=5;break}return t.abrupt("return",e.$store.commit("layer/SET_GENERATING",!1));case 5:n=Object(b["clone"])(e.nodes),i=Object(p["a"])(n),t.prev=7,i.s();case 9:if((a=i.n()).done){t.next=46;break}if(s=a.value,s.layer===e.activatedLayer){t.next=13;break}return t.abrupt("continue",44);case 13:return t.next=15,e.searchRelates(s);case 15:if(r=t.sent,"random"===e.layerSettings.generate&&(r=Object(b["shuffle"])(r)),"relate"===e.layerSettings.generate&&r.sort((function(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:void 0})),r.length){t.next=20;break}return t.abrupt("continue",44);case 20:o=r.length>=e.layerSettings.maxRelates?e.layerSettings.maxRelates:r.length,c=1,l=[],d=Object(p["a"])(r),t.prev=24,d.s();case 26:if((u=d.n()).done){t.next=36;break}if(f=u.value,!(c>o)){t.next=30;break}return t.abrupt("break",36);case 30:h=f.start.label,m=f.end.label,y=s.label===h?m:h,l.includes(y)||(e.$store.commit("network/ADD_NODES",e.newNode(y)),e.$store.commit("network/ADD_LINKS",e.newLink(s,y)),c+=1,l.push(y));case 34:t.next=26;break;case 36:t.next=41;break;case 38:t.prev=38,t.t0=t["catch"](24),d.e(t.t0);case 41:return t.prev=41,d.f(),t.finish(41);case 44:t.next=9;break;case 46:t.next=51;break;case 48:t.prev=48,t.t1=t["catch"](7),i.e(t.t1);case 51:return t.prev=51,i.f(),t.finish(51);case 54:e.$store.commit("layer/SET_TOTAL_LAYER",e.totalLayer+1),e.$store.commit("layer/SET_ACTIVATED_LAYER",e.totalLayer),e.$store.commit("layer/SET_GENERATING",!1);case 57:case"end":return t.stop()}}),t,null,[[7,48,51,54],[24,38,41,44]])})))()},resetLayer:function(){this.$store.commit("network/SET_NODES",[]),this.$store.commit("network/SET_LINKS",[]),this.$store.commit("layer/SET_TOTAL_LAYER",1),this.$store.commit("layer/SET_ACTIVATED_LAYER",1),this.$store.commit("layer/SET_GENERATING",!1)},deleteLayer:function(e){this.$store.commit("layer/SET_GENERATING",!0);var t=Object(b["clone"])(this.nodes),n=Object(b["clone"])(this.links),i=Object(b["filter"])(t,(function(t){return t.layer!==e&&t.layer<e})),a=Object(b["map"])(i,(function(e){return new k({id:e.id,label:e.label,closeness:0,layer:e.layer})})),s=Object(b["filter"])(n,(function(t){return t.source.layer!==e&&t.target.layer!==e&&t.target.layer<e&&t.source.layer<e})),r=Object(b["map"])(s,(function(e){return new L({source:e.source.id,target:e.target.id,label:""})}));return this.$store.commit("network/SET_NODES",a),this.$store.commit("network/SET_LINKS",r),this.$store.commit("layer/SET_TOTAL_LAYER",e-1),this.$store.commit("layer/SET_ACTIVATED_LAYER",e-1),this.$store.commit("layer/SET_GENERATING",!1)},selectLayer:function(e){this.$store.commit("layer/SET_ACTIVATED_LAYER",e)},newNode:function(e){var t=new k({id:"".concat(this.activatedLayer+1,"-").concat(e),label:e,closeness:0,layer:this.activatedLayer+1});return t},newLink:function(e,t){var n=new L({source:"".concat(this.activatedLayer+1,"-").concat(t),target:e.id,label:""});return n},searchRelates:function(e){return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X({method:"get",url:"/en/".concat(e.label)});case 2:return n=t.sent,i=Object(h["a"])(n,1),a=i[0],t.abrupt("return",a.edges);case 6:case"end":return t.stop()}}),t)})))()},isAPILayer:function(){return!(this.activatedLayer+1>3||0===this.activatedLayer)||(this.$store.commit("layer/SET_TOTAL_LAYER",this.totalLayer+1),this.$store.commit("layer/SET_ACTIVATED_LAYER",this.totalLayer),!1)}}},te=ee,ne=(n("f20a"),Object(N["a"])(te,u,f,!1,null,"157a89b2",null)),ie=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showPane||1===e.activatedLayer?n("vs-card",{staticClass:"input-pane",class:{"start-position":!e.nodes.length},attrs:{actionable:""}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h3",{staticClass:"text-gray-400"},[e._v(" Add Node ")])]),e.nodes.length?e._e():n("div",[n("vs-button",{staticClass:"w-full",attrs:{type:"gradient"},on:{click:e.importNodes}},[e._v("Import")]),n("input",{ref:"nodeImport",staticClass:"hidden",attrs:{id:"import",type:"file",name:""},on:{input:e.importCSV}}),n("div",{staticClass:"my-[20px] text-gray-400"},[e._v(" OR ")])],1),n("vs-input",{staticClass:"w-full",attrs:{placeholder:"Enter Node Name"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddNode.apply(null,arguments)}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("vs-row",{attrs:{"vs-justify":"flex-end"}},[n("vs-button",{staticClass:"w-[100px]",attrs:{color:"success",type:"gradient"},on:{click:e.handleAddNode}},[e._v("Add")])],1)],1)],1):e._e()},se=[],re=(n("498a"),{name:"InputPane",mixins:[S],data:function(){return{label:"",closeness:0}},computed:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(O["b"])("network",["nodes","selectedNode"])),Object(O["b"])("layer",["activatedLayer"])),{},{showPane:function(){var e=!1;return this.activatedLayer>1&&this.selectedNode&&(e=!0),this.selectedNode&&(this.activatedLayer===this.selectedNode.layer&&(e=!1),this.activatedLayer!==this.selectedNode.layer+1&&(e=!1)),e}}),methods:{handleAddNode:function(){return this.label.trim()?this.checkRepeatNode()?this.$vs.notify({icon:"warning",title:"Notice",text:"Node already existing",color:"warning",position:"top-center"}):(this.addNode(),this.addLink(),this.$vs.notify({icon:"check",title:"New Node",text:this.label.trim(),color:"success",position:"top-center"}),this.label="",void(this.closeness=0)):this.$vs.notify({icon:"warning",title:"Notice",text:"Please enter node name",color:"warning",position:"top-center"})},addNode:function(){var e=new k({id:"".concat(this.activatedLayer,"-").concat(this.label.trim()),label:this.label.trim(),closeness:Number(this.closeness),layer:this.activatedLayer});this.$store.commit("network/ADD_NODES",e)},addLink:function(){if(this.selectedNode&&1!==this.activatedLayer){var e=new L({source:"".concat(this.activatedLayer,"-").concat(this.label.trim()),target:this.selectedNode.id,label:""});this.$store.commit("network/ADD_LINKS",e)}},checkRepeatNode:function(){return Boolean(Object(b["find"])(this.nodes,{id:"".concat(this.activatedLayer,"-").concat(this.label.trim()),layer:this.activatedLayer}))}}}),oe=re,ce=(n("cbe3"),Object(N["a"])(oe,ae,se,!1,null,"5354eda2",null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-pane"},[n("section",{staticClass:"text-left"},[n("p",{staticClass:"text-[20px] font-bold mb-[5px]"},[e._v("Node Data")]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("ID:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.id:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Label:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.label:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Layer:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.layer:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Closeness:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.closeness:""))])])]),n("hr",{staticClass:"my-4 border-gray-400"}),n("section",{staticClass:"text-left"},[n("p",{staticClass:"text-[20px] font-bold mt-[20px] mb-[5px]"},[e._v("Relations Nodes")]),n("div",e._l(e.refNodeFilter,(function(t){return n("div",{key:t.id},[e._v(" "+e._s(t.label)+" ")])})),0)])])},ue=[],fe={name:"DataPane",computed:Object(d["a"])(Object(d["a"])({},Object(O["b"])("network",["selectedNode","links","refNodes"])),{},{refNodeFilter:function(){var e=this;if(!this.selectedNode)return[];var t=Object(b["filter"])(this.refNodes,(function(t){return t.id!==e.selectedNode.id}));return t}})},he=fe,pe=(n("64e0"),Object(N["a"])(he,de,ue,!1,null,"273bc7f0",null)),me=pe.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{width:e.svgSize.width+"px",height:e.svgSize.height+"px"},attrs:{id:"network"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.linkTextVisible,expression:"linkTextVisible"}],staticClass:"linkText",style:e.linkTextPosition,domProps:{textContent:e._s(e.linkTextContent)}}),n("svg",{style:{"background-color":e.theme.bgcolor},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:e.svgSize.width,height:e.svgSize.height},on:{click:e.clickEle,mouseover:function(t){return t.preventDefault(),e.svgMouseover.apply(null,arguments)},mouseout:e.svgMouseout,contextmenu:function(t){return t.preventDefault(),e.$emit("clear")}}},[n("g",{attrs:{id:"container"}},[n("g",e._l(e.links,(function(t){return n("g",{key:t.index},[n("line",{class:t[e.linkTypeKey]+" "+t.selected+" link element",attrs:{stroke:e.theme.linkStroke,"stroke-width":e.linkWidth}}),e.showLinkText?n("text",{staticClass:"link-text",attrs:{dx:"0",dy:"0",fill:e.theme.textFill,"font-size":e.linkTextFrontSize}},[e._v(" "+e._s(t[e.linkTextKey])+" ")]):e._e()])})),0),n("g",{attrs:{id:"node-group"}},[e._l(e.nodes,(function(t){return n("g",{key:t.index},[n("circle",{class:"layer-"+t[e.nodeTypeKey]+" "+(t.showText?"selected":"")+" node element",attrs:{fill:e.nodeColor(t[e.nodeTypeKey]),"stroke-width":-1==e.highlightNodes.indexOf(t.id)?1.5:10,stroke:-1==e.highlightNodes.indexOf(t.id)?e.theme.nodeStroke:"gold",r:e.nodeSize}}),n("foreignObject",{directives:[{name:"show",rawName:"v-show",value:e.pinned.includes(t.index),expression:"pinned.includes(node.index)"}],staticClass:"rect flex",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15"}},[n("vs-button",{staticClass:"delete-btn",attrs:{color:"danger"},on:{click:function(n){return e.$emit("deleteNode",t)}}},[e._v("X")])],1),n("text",{staticClass:"node-text",class:{"focus-text":e.pinned.includes(t.index)},attrs:{dx:e.nodeSize+5,dy:"0",fill:e.theme.textFill,"font-size":e.nodeTextFontSize}},[e._v(" "+e._s(t[e.nodeTextKey])+" ")])])})),n("g")],2)])])])},ge=[],be=(n("fb6a"),n("4de4"),n("d3b7"),n("159b"),n("5698"));DOMTokenList.prototype.indexOf=Array.prototype.indexOf;var ve={name:"network",props:{nodeList:Array,linkList:Array,nodeSize:{type:Number,default:14},nodeTextKey:{type:String,default:"id"},nodeTypeKey:{type:String,default:"group"},nodeTextFontSize:{type:Number,default:14},linkWidth:{type:Number,default:1.5},showLinkText:{type:Boolean,default:!1},linkTextKey:{type:String,default:"value"},linkTypeKey:{type:String,default:"type"},linkTextFrontSize:{type:Number,default:10},linkDistance:{type:Number,default:50},svgSize:{type:Object,default:function(){return{width:window.innerWidth,height:window.innerHeight}}},svgTheme:{type:String,default:"light"},bodyStrength:{type:Number,default:-100},highlightNodes:{type:Array,default:function(){return[]}}},data:function(){return{selection:{links:[],nodes:[]},pinned:[],force:null,zoom:be["k"](),nodeColor:be["g"](be["h"]),linkTextVisible:!1,linkTextPosition:{top:0,left:0},linkTextContent:""}},computed:Object(d["a"])(Object(d["a"])({},Object(O["b"])("layer",["activatedLayer"])),{},{nodes:function(){var e=this.nodeList.slice(),t=[];return e=e.filter((function(e){return-1===t.indexOf(e.id)&&(t.push(e.id),!0)})),e},links:function(){return this.linkList},theme:function(){return"light"===this.svgTheme?{bgcolor:"#353f52",nodeStroke:"white",linkStroke:"lightgray",textFill:"lightgray"}:{bgcolor:"black",nodeStroke:"white",linkStroke:"rgba(200,200,200)",textFill:"white"}}}),watch:{activatedLayer:function(){be["j"]("circle").attr("r",10),be["j"](".layer-".concat(this.activatedLayer)).attr("r",15)},bodyStrength:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))},linkDistance:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))},nodes:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))}},created:function(){this.initData()},mounted:function(){this.initDragTickZoom()},methods:{initData:function(){this.force=be["f"](this.nodes).force("link",be["d"](this.links).id((function(e){return e.id})).distance(this.linkDistance)).force("charge",be["e"]().strength(this.bodyStrength)).force("center",be["c"](this.svgSize.width/2,this.svgSize.height/2))},initDragTickZoom:function(){var e=this;be["j"](".node").call(this.drag(this.force)),this.force.on("tick",(function(){be["j"](".link").data(e.links).attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),be["j"](".rect").data(e.nodes).attr("x",(function(e){return e.x+10})).attr("y",(function(e){return e.y-30})),be["j"](".node").data(e.nodes).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),be["j"](".node-text").data(e.nodes).attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),be["j"](".link-text").data(e.links).attr("x",(function(e){return(e.source.x+e.target.x)/2})).attr("y",(function(e){return(e.source.y+e.target.y)/2}))})),this.zoom.scaleExtent([.1,4]).on("zoom",this.zoomed),be["i"]("svg").call(this.zoom).on("dblclick.zoom",null)},clickLink:function(e){this.$emit("clickLink",e,e.target.__data__)},clickNode:function(e){var t=!1;0===this.pinned.length?(this.pinnedState(e),t=!0):(this.pinned=[],t=!1),this.$emit("clickNode",e,e.target.__data__),t||this.$emit("deFocus")},clickEle:function(e){"circle"===e.target.tagName?this.clickNode(e):"line"===e.target.tagName&&this.clickLink(e)},svgMouseover:function(e){"circle"===e.target.nodeName?(0===this.pinned.length&&this.selectedState(e),this.$forceUpdate(),this.$emit("hoverNode",e,e.target.__data__)):"line"===e.target.nodeName&&(this.linkTextPosition={left:e.clientX+"px",top:e.clientY-50+"px"},this.linkTextContent=e.target.__data__[this.linkTextKey],this.linkTextVisible=!0,this.$emit("hoverLink",e,e.target.__data__))},svgMouseout:function(e){this.linkTextVisible=!1,"circle"===e.target.nodeName&&(0===this.pinned.length&&this.noSelectedState(e),this.$forceUpdate())},selectedState:function(e){e.target.__data__.showText=!0,e.target.classList.add("selected"),this.selection.nodes.push(e.target.__data__),this.$store.commit("network/ADD_REF_NODES",e.target.__data__),this.lightNeibor(e.target.__data__),be["j"](".element").style("opacity",.2)},noSelectedState:function(e){e.target.__data__.showText=!1,this.darkenNerbor(),be["j"](".element").style("opacity",1)},pinnedState:function(e){this.pinned.push(e.target.__data__.index),be["j"](".element").style("opacity",.05)},lightNeibor:function(e){var t=this;this.links.forEach((function(n){n.source.index===e.index&&(n.selected="selected",t.selection.links.push(n),t.selection.nodes.push(n.target),t.$store.commit("network/ADD_REF_NODES",n.target),t.lightNode(n.target)),n.target.index===e.index&&(n.selected="selected",t.selection.links.push(n),t.selection.nodes.push(n.source),t.$store.commit("network/ADD_REF_NODES",n.source),t.lightNode(n.source))}))},lightNode:function(e){this.nodes.forEach((function(t){t.index===e.index&&(t.showText=!0)}))},darkenNerbor:function(){var e=this;this.links.forEach((function(t){e.selection.links.forEach((function(e){e.id===t.id&&(t.selected="")}))})),this.nodes.forEach((function(t){e.selection.nodes.forEach((function(e){e.id===t.id&&(t.showText=!1)}))})),this.selection.nodes=[],this.$store.commit("network/SET_REF_NODES",[]),this.selection.links=[]},zoomed:function(){be["i"]("#container").attr("transform","translate("+be["b"].transform.x+","+be["b"].transform.y+") scale("+be["b"].transform.k+")")},drag:function(e){function t(t){be["b"].active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function n(e){e.fx=be["b"].x,e.fy=be["b"].y}function i(t){be["b"].active||e.alphaTarget(0),t.fx=null,t.fy=null}return be["a"]().on("start",t).on("drag",n).on("end",i)}}},xe=ve,ke=(n("3128"),Object(N["a"])(xe,ye,ge,!1,null,"b9956fc4",null)),_e=ke.exports,we=n("512e"),Ne=(n("c1ea"),{name:"Home",components:{LayerPane:ie,Network:_e,Splitpanes:we["Splitpanes"],Pane:we["Pane"],InputPane:le,DataPane:me},computed:Object(d["a"])(Object(d["a"])({},Object(O["b"])("network",["nodes","links"])),Object(O["b"])("layer",["generating"])),methods:{deleteNode:function(e){var t=Object(b["filter"])(this.nodes,(function(t){return t.id!==e.id}));t=Object(b["map"])(t,(function(e){return new k({id:e.id,label:e.label,closeness:0,layer:e.layer})}));var n=Object(b["filter"])(this.links,(function(t){return t.source.id!==e.id&&t.target.id!==e.id}));n=Object(b["map"])(n,(function(e){return new L({source:e.source.id,target:e.target.id,label:""})})),this.$store.commit("network/SET_NODES",t),this.$store.commit("network/SET_LINKS",n)},clickNode:function(e,t){this.$store.commit("network/SET_SELECTED_NODES",t)},deFocus:function(){this.$store.commit("network/SET_SELECTED_NODES",null)}}}),Ee=Ne,Se=(n("8e77"),Object(N["a"])(Ee,c,l,!1,null,"184ce0c2",null)),Te=Se.exports,Le={name:"App",components:{Home:Te}},Oe=Le,je=(n("034f"),Object(N["a"])(Oe,r,o,!1,null,null,null)),Ce=je.exports,De={namespaced:!0,state:{generating:!1,totalLayer:1,activatedLayer:1,layerSettings:{generate:"relate",source:"conceptNet",maxRelates:5}},mutations:{SET_GENERATING:function(e,t){e.generating=t},SET_ACTIVATED_LAYER:function(e,t){e.activatedLayer=t},SET_TOTAL_LAYER:function(e,t){e.totalLayer=t},SET_LAYER_SETTINGS:function(e,t){var n=t.key,i=t.value;e.layerSettings[n]=i}}},$e=De,Ae={namespaced:!0,state:{selectedNode:null,refNodes:[],nodes:[],links:[]},mutations:{SET_SELECTED_NODES:function(e,t){e.selectedNode=t},SET_REF_NODES:function(e,t){e.refNodes=t},ADD_REF_NODES:function(e,t){e.refNodes.push(t)},SET_NODES:function(e,t){e.nodes=t},ADD_NODES:function(e,t){e.nodes.push(t)},SET_LINKS:function(e,t){e.links=t},ADD_LINKS:function(e,t){e.links.push(t)}}},Re=Ae,Ie={},ze=Ie;s["default"].use(O["a"]);var Pe=new O["a"].Store({state:{},mutations:{},modules:{layer:$e,network:Re},getters:ze}),Me=Pe,Fe=n("ee98"),Ke=n.n(Fe),Ve=n("589d"),We=n.n(Ve),Ge=n("2347"),Ye=n.n(Ge),Be=n("5c96"),Ze=n.n(Be),He=(n("0fae"),n("fb9a")),Ue=n.n(He);n("04f2"),n("c789"),n("5a4b"),n("5717");s["default"].config.productionTip=!1,s["default"].use(Ze.a),s["default"].use(Ue.a),s["default"].component("downloadCsv",Ye.a),s["default"].use(Ke.a,{velocity:We.a}),new s["default"]({store:Me,render:function(e){return e(Ce)}}).$mount("#app")},5717:function(e,t,n){},"5a4b":function(e,t,n){},"61fe":function(e,t,n){},"64e0":function(e,t,n){"use strict";n("0c31")},"8e77":function(e,t,n){"use strict";n("ddc7")},9023:function(e,t,n){"use strict";n("e099")},c7cf:function(e,t,n){},cbe3:function(e,t,n){"use strict";n("33d9")},ddc7:function(e,t,n){},e099:function(e,t,n){},e0e9:function(e,t,n){"use strict";n("223f")},e3d2:function(e,t,n){},e754:function(e,t,n){},f179:function(e,t,n){"use strict";n("e3d2")},f20a:function(e,t,n){"use strict";n("fe72")},f6db:function(e,t,n){"use strict";n("e754")},fe72:function(e,t,n){}});
//# sourceMappingURL=app.d4aba798.js.map