(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/d3-force-test/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("c7cf")},"10cc":function(e,t,n){"use strict";n("a560")},"25f3":function(e,t,n){},"28e5":function(e,t,n){},"2e24":function(e,t,n){"use strict";n("6f06")},"35de":function(e,t,n){"use strict";n("28e5")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home"),n("notifications",{attrs:{position:"top center"}})],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("splitpanes",{staticClass:"default-theme overflow-hidden"},[n("pane",{key:0,attrs:{size:"20"}},[n("LayerPane")],1),n("pane",{directives:[{name:"loading",rawName:"v-loading",value:e.generating,expression:"generating"}],key:1,attrs:{size:"60"}},[n("div",{staticClass:"relative"},[n("network",{attrs:{nodeList:e.nodes,linkList:e.links,showLinkText:"",nodeTextKey:"label",nodeTypeKey:"layer",linkTextKey:"label"},on:{clear:function(t){e.nodes=[],e.links=[]},deleteNode:e.deleteNode,clickNode:e.clickNode,deFocus:e.deFocus}}),n("WelcomePane"),n("InputPane")],1)]),n("pane",{key:2,attrs:{size:"20"}},[n("div",{staticClass:"w-full h-full bg-gray-800 text-gray-400 p-5"},[n("DataPane")],1)])],1)],1)},o=[],c=n("5530"),l=(n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layer-pane"},[n("vs-tabs",[n("vs-tab",{attrs:{label:"Layers"}},[n("section",{staticClass:"layers-wrapper"},[e._l(e.totalLayer,(function(t){return n("div",{key:t,staticClass:"layers-list"},[n("vs-button",{staticClass:"w-full",class:{"de-avtivated":e.activatedLayer!==t},attrs:{color:"#6EE7B7",type:"filled"},on:{click:function(n){return e.selectLayer(t)}}},[e._v(" Layer "+e._s(t)+" ")]),t>1?n("vs-button",{attrs:{color:"danger",type:"filled",icon:"delete"},on:{click:function(n){return e.deleteLayer(t)}}}):e._e(),1===t&&e.nodes.length?n("vs-button",{attrs:{color:"danger",type:"filled",icon:"cached"},on:{click:function(n){return e.deleteLayer(t)}}}):e._e()],1)})),n("vs-button",{directives:[{name:"loading",rawName:"v-loading",value:e.generating,expression:"generating"}],staticClass:"w-full my-[20px] ",attrs:{disabled:e.disabledAddLayerBtn,color:"primary",type:"filled"},on:{click:e.addLayer}},[e._v(" + Layer "+e._s(e.totalLayer+1)+" ")])],2)]),n("vs-tab",{attrs:{label:"Settings"}},[n("LayerSettings",{staticClass:" pt-[20px]"})],1),n("vs-tab",{attrs:{label:"Import/Export"}},[n("section",{staticClass:"grid gap-[10px] pt-[20px]"},[n("vs-button",{staticClass:"w-full",attrs:{color:"primary"},on:{click:e.importNodes}},[e._v("Import Nodes")]),n("input",{ref:"nodeImport",staticClass:"hidden",attrs:{type:"file",name:"",id:"import"},on:{input:e.importCSV}}),e.nodes.length?e._e():n("vs-button",{staticClass:"w-full",attrs:{disabled:""}},[e._v(" Export ")]),e.nodes.length?n("download-csv",{attrs:{data:e.nodes}},[n("vs-button",{staticClass:"w-full",attrs:{id:"export-btn"}},[e._v("Export")])],1):e._e()],1)])],1),e.showImportWarningModal?n("ImportWarningModalVue",{on:{close:function(t){e.showImportWarningModal=!1},confirm:function(t){return e.$refs["nodeImport"].click()}}}):e._e()],1)}),d=[],u=n("3835"),f=n("b85c"),h=n("1da1"),p=(n("96cf"),n("4e82"),n("caad"),n("2532"),n("e9c4"),n("99af"),n("a9e3"),n("d4ec")),m=function e(t){var n=t.id,i=t.label,a=t.closeness,r=t.layer;Object(p["a"])(this,e),this.id=n,this.label=i,this.layer=r,this.closeness=a||0},y=m,b=function e(t){var n=t.source,i=t.target,a=t.label,r=t.weight;Object(p["a"])(this,e),this.source=n,this.target=i,this.label=a,this.weight=r||0},v=b,g=n("2f62"),k=n("96e8"),_=n.n(k),x=n("2ef0"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"layer-settings"},[n("vs-select",{staticClass:"test",attrs:{label:"Generate"},model:{value:e.generate,callback:function(t){e.generate=t},expression:"generate"}},e._l(e.options,(function(e,t){return n("vs-select-item",{key:t,attrs:{value:e.text,text:e.text}})})),1),n("vs-select",{staticClass:"test",attrs:{label:"Source"},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.netData,(function(e,t){return n("vs-select-item",{key:t,attrs:{value:e.text,text:e.text}})})),1)],1)},N=[],S=function(e){return{get:function(){return this.layerSettings[e]},set:function(t){this.$store.commit("layer/SET_LAYER_SETTINGS",{key:e,value:t})}}},E={name:"LayerSettings",data:function(){return{order:"",net:"",options:[{text:"最相關"},{text:"隨機"}],netData:[{text:"conceptNet"}]}},computed:Object(c["a"])(Object(c["a"])({},Object(g["b"])("layer",["layerSettings"])),{},{generate:S("generate"),source:S("source")})},T=E,L=(n("69dc"),n("2877")),O=Object(L["a"])(T,w,N,!1,null,"11d6c94c",null),j=O.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vs-prompt",{attrs:{title:"Warning",color:"danger",active:e.show},on:{cancel:e.close,accept:e.confirm,close:e.close,"update:active":function(t){e.show=t}}},[n("div",{staticClass:"con-exemple-prompt"},[n("vs-alert",{attrs:{color:"danger",icon:"new_releases"}},[e._v(" 將會遺失當前工作階段，是否繼續? ")])],1)])},C=[],$={name:"ImportWarningModal",data:function(){return{show:!0}},methods:{confirm:function(){this.$emit("confirm"),this.$emit("close")},close:function(){var e=this;this.show=!1,setTimeout((function(){e.$emit("close")}),300)}}},A=$,I=(n("10cc"),Object(L["a"])(A,D,C,!1,null,"c56e7aaa",null)),R=I.exports,P=n("bc3a"),z=n.n(P),F=z.a.create({baseURL:"https://api.conceptnet.io/c"}),K=function(e){return[e.data,null]},V=function(e){return[null,e.response||e]};F.interceptors.response.use(K,V),F.interceptors.request.use(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.headers.Authorization="Bot ".concat(Object({NODE_ENV:"production",BASE_URL:"/d3-force-test/"}).BOT_TOKEN),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var M={name:"LayerPane",components:{ImportWarningModalVue:R,LayerSettings:j},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(g["b"])("network",["nodes","links"])),Object(g["b"])("layer",["totalLayer","activatedLayer","generating"])),{},{disabledAddLayerBtn:function(){return this.generating||!this.nodes.length&&0!==this.activatedLayer},preLayer:function(){return 0===this.activatedLayer?0:this.activatedLayer-1},nextLayer:function(){return this.activatedLayer+1}}),data:function(){return{showImportWarningModal:!1}},methods:{addLayer:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,i,a,r,s,o,c,l,d,u,h,p,m,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAPILayer()){t.next=2;break}return t.abrupt("return");case 2:if(e.$store.commit("layer/SET_GENERATING",!0),e.nodes.length){t.next=5;break}return t.abrupt("return",e.$store.commit("layer/SET_GENERATING",!1));case 5:n=Object(x["clone"])(e.nodes),i=Object(f["a"])(n),t.prev=7,i.s();case 9:if((a=i.n()).done){t.next=45;break}if(r=a.value,r.layer===e.activatedLayer){t.next=13;break}return t.abrupt("continue",43);case 13:return t.next=15,e.searchRelates(r);case 15:if(s=t.sent,s.sort((function(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:void 0})),s.length){t.next=19;break}return t.abrupt("continue",43);case 19:o=s.length>=5?5:s.length,c=1,l=[],d=Object(f["a"])(s),t.prev=23,d.s();case 25:if((u=d.n()).done){t.next=35;break}if(h=u.value,!(c>o)){t.next=29;break}return t.abrupt("break",35);case 29:p=h.start.label,m=h.end.label,y=r.label===p?m:p,l.includes(y)||(e.$store.commit("network/ADD_NODES",e.newNode(y)),e.$store.commit("network/ADD_LINKS",e.newLink(r,y)),c+=1,l.push(y));case 33:t.next=25;break;case 35:t.next=40;break;case 37:t.prev=37,t.t0=t["catch"](23),d.e(t.t0);case 40:return t.prev=40,d.f(),t.finish(40);case 43:t.next=9;break;case 45:t.next=50;break;case 47:t.prev=47,t.t1=t["catch"](7),i.e(t.t1);case 50:return t.prev=50,i.f(),t.finish(50);case 53:e.$store.commit("layer/SET_TOTAL_LAYER",e.totalLayer+1),e.$store.commit("layer/SET_ACTIVATED_LAYER",e.totalLayer),e.$store.commit("layer/SET_GENERATING",!1);case 56:case"end":return t.stop()}}),t,null,[[7,47,50,53],[23,37,40,43]])})))()},deleteLayer:function(e){if(1===e)return this.$store.commit("network/SET_NODES",[]),void this.$store.commit("network/SET_LINKS",[]);var t=JSON.parse(JSON.stringify(this.nodes)),n=JSON.parse(JSON.stringify(this.links)),i=Object(x["filter"])(t,(function(t){return t.layer!==e&&t.layer<e}));this.$store.commit("network/SET_NODES",i);var a=Object(x["filter"])(n,(function(t){return t.source.layer!==e&&t.target.layer!==e&&t.target.layer<e&&t.source.layer<e}));this.$store.commit("network/SET_LINKS",a),this.$store.commit("layer/SET_TOTAL_LAYER",e-1),this.$store.commit("layer/SET_ACTIVATED_LAYER",e-1)},selectLayer:function(e){this.$store.commit("layer/SET_ACTIVATED_LAYER",e)},newNode:function(e){var t=new y({id:"".concat(this.activatedLayer+1,"-").concat(e),label:e,closeness:0,layer:this.activatedLayer+1});return t},newLink:function(e,t){var n=new v({source:"".concat(this.activatedLayer+1,"-").concat(t),target:e.id,label:""});return n},searchRelates:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F({method:"get",url:"/en/".concat(e.label)});case 2:return n=t.sent,i=Object(u["a"])(n,1),a=i[0],t.abrupt("return",a.edges);case 6:case"end":return t.stop()}}),t)})))()},isAPILayer:function(){return!(this.activatedLayer+1>3||0===this.activatedLayer)||(this.$store.commit("layer/SET_TOTAL_LAYER",this.totalLayer+1),this.$store.commit("layer/SET_ACTIVATED_LAYER",this.totalLayer),!1)},importNodes:function(){this.nodes.length&&(this.showImportWarningModal=!0),this.nodes.length||this.$refs["nodeImport"].click()},parseCSVData:function(e){var t=this,n=[];return Object(x["forEach"])(e,(function(e){var i=new y({id:"1-".concat(e.Label),label:e.Label,closeness:Number(t.closeness)||0,layer:1});n.push(i)})),n},importCSV:function(e){var t=this;this.$store.commit("network/SET_NODES",[]),this.$store.commit("network/SET_LINKS",[]);var n=e.target.files[0],i=new FileReader;i.onload=function(){var e=_()(i.result,{parseNumbers:!0}),n=t.parseCSVData(e);t.$store.commit("network/SET_NODES",n),t.$message.success("Import nodes success")},i.readAsText(n)}}},W=M,Y=(n("d0c8"),Object(L["a"])(W,l,d,!1,null,"69cbce1c",null)),G=Y.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showPane?n("vs-card",{staticClass:"input-pane",class:{"start-position":!e.nodes.length},attrs:{actionable:""}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h3",{staticClass:"text-gray-400"},[e._v(" Add Node ")])]),n("vs-input",{staticClass:"w-full",attrs:{placeholder:"Enter Node Name"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddNode.apply(null,arguments)}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("vs-row",{attrs:{"vs-justify":"flex-end"}},[n("vs-button",{staticClass:"w-[100px]",attrs:{color:"success",type:"gradient"},on:{click:e.handleAddNode}},[e._v("Add")])],1)],1)],1):e._e()},J=[],Z=(n("498a"),{name:"InputPane",data:function(){return{label:"",closeness:0}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(g["b"])("network",["nodes","selectedNode"])),Object(g["b"])("layer",["activatedLayer"])),{},{showPane:function(){var e=!1;return 1===this.activatedLayer||this.activatedLayer>1&&this.selectedNode?e=!0:this.selectedNode&&(this.activatedLayer===this.selectedNode.layer&&(e=!1),this.activatedLayer!==this.selectedNode.layer+1&&(e=!1)),e}}),methods:{handleAddNode:function(){return this.label.trim()?this.checkRepeatNode()?this.$message.warning("節點已存在"):(this.addNode(),this.addLink(),this.$vs.notify({icon:"check",title:"New Node",text:this.label.trim(),color:"success",position:"top-center"}),this.label="",void(this.closeness=0)):this.$vs.notify({icon:"warning",title:"Notice",text:"Please enter node name",color:"warning",position:"top-center"})},addNode:function(){var e=new y({id:"".concat(this.activatedLayer,"-").concat(this.label.trim()),label:this.label.trim(),closeness:Number(this.closeness),layer:this.activatedLayer});this.$store.commit("network/ADD_NODES",e)},addLink:function(){if(this.selectedNode&&1!==this.activatedLayer){var e=new v({source:"".concat(this.activatedLayer,"-").concat(this.label.trim()),target:this.selectedNode.id,label:""});this.$store.commit("network/ADD_LINKS",e)}},checkRepeatNode:function(){return Boolean(Object(x["find"])(this.nodes,{id:"".concat(this.activatedLayer,"-").concat(this.label.trim()),layer:this.activatedLayer}))}}}),H=Z,U=(n("747b"),Object(L["a"])(H,B,J,!1,null,"cb6f4bf0",null)),q=U.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-pane"},[n("section",{staticClass:"text-left"},[n("p",{staticClass:"text-[20px] font-bold mb-[5px]"},[e._v("Node Data")]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("ID:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.id:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Label:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.label:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Layer:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.layer:""))])]),n("div",{staticClass:"info-block"},[n("span",{staticClass:"label"},[e._v("Closeness:")]),n("span",[e._v(e._s(e.selectedNode?e.selectedNode.closeness:""))])])]),n("hr",{staticClass:"my-4 border-gray-400"}),n("section",{staticClass:"text-left"},[n("p",{staticClass:"text-[20px] font-bold mt-[20px] mb-[5px]"},[e._v("Relations Nodes")]),n("div",e._l(e.refNodeFilter,(function(t){return n("div",{key:t.id},[e._v(" "+e._s(t.label)+" ")])})),0)])])},Q=[],ee={name:"DataPane",computed:Object(c["a"])(Object(c["a"])({},Object(g["b"])("network",["selectedNode","links","refNodes"])),{},{refNodeFilter:function(){var e=this;if(!this.selectedNode)return[];var t=Object(x["filter"])(this.refNodes,(function(t){return t.id!==e.selectedNode.id}));return t}})},te=ee,ne=(n("2e24"),Object(L["a"])(te,X,Q,!1,null,"50dcb021",null)),ie=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{width:e.svgSize.width+"px",height:e.svgSize.height+"px"},attrs:{id:"network"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.linkTextVisible,expression:"linkTextVisible"}],staticClass:"linkText",style:e.linkTextPosition,domProps:{textContent:e._s(e.linkTextContent)}}),n("svg",{style:{"background-color":e.theme.bgcolor},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:e.svgSize.width,height:e.svgSize.height},on:{click:e.clickEle,mouseover:function(t){return t.preventDefault(),e.svgMouseover.apply(null,arguments)},mouseout:e.svgMouseout,contextmenu:function(t){return t.preventDefault(),e.$emit("clear")}}},[n("g",{attrs:{id:"container"}},[n("g",e._l(e.links,(function(t){return n("g",{key:t.index},[n("line",{class:t[e.linkTypeKey]+" "+t.selected+" link element",attrs:{stroke:e.theme.linkStroke,"stroke-width":e.linkWidth}}),e.showLinkText?n("text",{staticClass:"link-text",attrs:{dx:"0",dy:"0",fill:e.theme.textFill,"font-size":e.linkTextFrontSize}},[e._v(" "+e._s(t[e.linkTextKey])+" ")]):e._e()])})),0),n("g",{attrs:{id:"node-group"}},[e._l(e.nodes,(function(t){return n("g",{key:t.index},[n("circle",{class:"layer-"+t[e.nodeTypeKey]+" "+(t.showText?"selected":"")+" node element",attrs:{fill:e.nodeColor(t[e.nodeTypeKey]),"stroke-width":-1==e.highlightNodes.indexOf(t.id)?1.5:10,stroke:-1==e.highlightNodes.indexOf(t.id)?e.theme.nodeStroke:"gold",r:e.nodeSize}}),n("rect",{directives:[{name:"show",rawName:"v-show",value:e.pinned.includes(t.index),expression:"pinned.includes(node.index)"}],staticClass:"rect",staticStyle:{fill:"red",stroke:"black","stroke-width":"1"},attrs:{rx:"15",ry:"15",width:"10",height:"10"},on:{click:function(n){return e.$emit("deleteNode",t)}}}),n("text",{staticClass:"node-text",attrs:{dx:e.nodeSize+5,dy:"0",fill:e.theme.textFill,"font-size":e.nodeTextFontSize}},[e._v(" "+e._s(t[e.nodeTextKey])+" ")])])})),n("g")],2)])])])},re=[],se=(n("fb6a"),n("4de4"),n("d3b7"),n("159b"),n("5698"));DOMTokenList.prototype.indexOf=Array.prototype.indexOf;var oe={name:"network",props:{nodeList:Array,linkList:Array,nodeSize:{type:Number,default:14},nodeTextKey:{type:String,default:"id"},nodeTypeKey:{type:String,default:"group"},nodeTextFontSize:{type:Number,default:14},linkWidth:{type:Number,default:1.5},showLinkText:{type:Boolean,default:!1},linkTextKey:{type:String,default:"value"},linkTypeKey:{type:String,default:"type"},linkTextFrontSize:{type:Number,default:10},linkDistance:{type:Number,default:50},svgSize:{type:Object,default:function(){return{width:window.innerWidth,height:window.innerHeight}}},svgTheme:{type:String,default:"light"},bodyStrength:{type:Number,default:-100},highlightNodes:{type:Array,default:function(){return[]}}},data:function(){return{selection:{links:[],nodes:[]},pinned:[],force:null,zoom:se["k"](),nodeColor:se["g"](se["h"]),linkTextVisible:!1,linkTextPosition:{top:0,left:0},linkTextContent:""}},computed:Object(c["a"])(Object(c["a"])({},Object(g["b"])("layer",["activatedLayer"])),{},{nodes:function(){var e=this.nodeList.slice(),t=[];return e=e.filter((function(e){return-1===t.indexOf(e.id)&&(t.push(e.id),!0)})),e},links:function(){return this.linkList},theme:function(){return"light"===this.svgTheme?{bgcolor:"#353f52",nodeStroke:"white",linkStroke:"lightgray",textFill:"lightgray"}:{bgcolor:"black",nodeStroke:"white",linkStroke:"rgba(200,200,200)",textFill:"white"}}}),watch:{activatedLayer:function(){se["j"]("circle").attr("r",10),se["j"](".layer-".concat(this.activatedLayer)).attr("r",15)},bodyStrength:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))},linkDistance:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))},nodes:function(){this.force.stop(),this.initData(),this.$nextTick((function(){this.initDragTickZoom(),this.force.restart()}))}},created:function(){this.initData()},mounted:function(){this.initDragTickZoom()},methods:{initData:function(){this.force=se["f"](this.nodes).force("link",se["d"](this.links).id((function(e){return e.id})).distance(this.linkDistance)).force("charge",se["e"]().strength(this.bodyStrength)).force("center",se["c"](this.svgSize.width/2,this.svgSize.height/2))},initDragTickZoom:function(){var e=this;se["j"](".node").call(this.drag(this.force)),this.force.on("tick",(function(){se["j"](".link").data(e.links).attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),se["j"](".rect").data(e.nodes).attr("x",(function(e){return e.x+5})).attr("y",(function(e){return e.y-15})),se["j"](".node").data(e.nodes).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),se["j"](".node-text").data(e.nodes).attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),se["j"](".link-text").data(e.links).attr("x",(function(e){return(e.source.x+e.target.x)/2})).attr("y",(function(e){return(e.source.y+e.target.y)/2}))})),this.zoom.scaleExtent([.1,4]).on("zoom",this.zoomed),se["i"]("svg").call(this.zoom).on("dblclick.zoom",null)},clickLink:function(e){this.$emit("clickLink",e,e.target.__data__)},clickNode:function(e){var t=!1;0===this.pinned.length?(this.pinnedState(e),t=!0):(this.pinned=[],t=!1),this.$emit("clickNode",e,e.target.__data__),t||this.$emit("deFocus")},clickEle:function(e){"circle"===e.target.tagName?this.clickNode(e):"line"===e.target.tagName&&this.clickLink(e)},svgMouseover:function(e){"circle"===e.target.nodeName?(0===this.pinned.length&&this.selectedState(e),this.$forceUpdate(),this.$emit("hoverNode",e,e.target.__data__)):"line"===e.target.nodeName&&(this.linkTextPosition={left:e.clientX+"px",top:e.clientY-50+"px"},this.linkTextContent=e.target.__data__[this.linkTextKey],this.linkTextVisible=!0,this.$emit("hoverLink",e,e.target.__data__))},svgMouseout:function(e){this.linkTextVisible=!1,"circle"===e.target.nodeName&&(0===this.pinned.length&&this.noSelectedState(e),this.$forceUpdate())},selectedState:function(e){e.target.__data__.showText=!0,e.target.classList.add("selected"),this.selection.nodes.push(e.target.__data__),this.$store.commit("network/ADD_REF_NODES",e.target.__data__),this.lightNeibor(e.target.__data__),se["j"](".element").style("opacity",.2)},noSelectedState:function(e){e.target.__data__.showText=!1,this.darkenNerbor(),se["j"](".element").style("opacity",1)},pinnedState:function(e){this.pinned.push(e.target.__data__.index),se["j"](".element").style("opacity",.05)},lightNeibor:function(e){var t=this;this.links.forEach((function(n){n.source.index===e.index&&(n.selected="selected",t.selection.links.push(n),t.selection.nodes.push(n.target),t.$store.commit("network/ADD_REF_NODES",n.target),t.lightNode(n.target)),n.target.index===e.index&&(n.selected="selected",t.selection.links.push(n),t.selection.nodes.push(n.source),t.$store.commit("network/ADD_REF_NODES",n.source),t.lightNode(n.source))}))},lightNode:function(e){this.nodes.forEach((function(t){t.index===e.index&&(t.showText=!0)}))},darkenNerbor:function(){var e=this;this.links.forEach((function(t){e.selection.links.forEach((function(e){e.id===t.id&&(t.selected="")}))})),this.nodes.forEach((function(t){e.selection.nodes.forEach((function(e){e.id===t.id&&(t.showText=!1)}))})),this.selection.nodes=[],this.$store.commit("network/SET_REF_NODES",[]),this.selection.links=[]},zoomed:function(){se["i"]("#container").attr("transform","translate("+se["b"].transform.x+","+se["b"].transform.y+") scale("+se["b"].transform.k+")")},drag:function(e){function t(t){se["b"].active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function n(e){e.fx=se["b"].x,e.fy=se["b"].y}function i(t){se["b"].active||e.alphaTarget(0),t.fx=null,t.fy=null}return se["a"]().on("start",t).on("drag",n).on("end",i)}}},ce=oe,le=(n("35de"),Object(L["a"])(ce,ae,re,!1,null,"911a5d50",null)),de=le.exports,ue=n("512e"),fe=(n("c1ea"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.nodes.length?e._e():n("div",{staticClass:"welcome-pane"},[n("div",{staticClass:"app-name"},[e._v("WordNet.io")]),n("vs-card",{staticClass:"bg-gray-600",attrs:{actionable:""}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("Import Data")]),n("vs-button",{staticClass:"px-[30px]"},[e._v(" Import CSV ")])],1),n("div",{staticClass:"text-[20px]"},[e._v("or")])],1)}),he=[],pe={name:"WelcomePane",computed:Object(c["a"])({},Object(g["b"])("network",["nodes"]))},me=pe,ye=(n("c9ba"),Object(L["a"])(me,fe,he,!1,null,"48699450",null)),be=ye.exports,ve={name:"Home",components:{LayerPane:G,Network:de,Splitpanes:ue["Splitpanes"],Pane:ue["Pane"],InputPane:q,DataPane:ie,WelcomePane:be},computed:Object(c["a"])(Object(c["a"])({},Object(g["b"])("network",["nodes","links"])),Object(g["b"])("layer",["generating"])),methods:{deleteNode:function(e){this.nodes.splice(e.index,1),this.deleteRefLink(e)},deleteRefLink:function(e){var t=Object(x["filter"])(this.links,(function(t){return t.source.id===e.id||t.target.id===e.id}));this.links=Object(x["difference"])(this.links,t)},clickNode:function(e,t){this.$store.commit("network/SET_SELECTED_NODES",t)},deFocus:function(){this.$store.commit("network/SET_SELECTED_NODES",null)}}},ge=ve,ke=(n("64f8"),Object(L["a"])(ge,s,o,!1,null,"0929578e",null)),_e=ke.exports,xe={name:"App",components:{Home:_e}},we=xe,Ne=(n("034f"),Object(L["a"])(we,a,r,!1,null,null,null)),Se=Ne.exports,Ee={namespaced:!0,state:{generating:!1,totalLayer:1,activatedLayer:1,layerSettings:{generate:"最相關",source:"conceptNet"}},mutations:{SET_GENERATING:function(e,t){e.generating=t},SET_ACTIVATED_LAYER:function(e,t){e.activatedLayer=t},SET_TOTAL_LAYER:function(e,t){e.totalLayer=t},SET_LAYER_SETTINGS:function(e,t){var n=t.key,i=t.value;e.layerSettings[n]=i}}},Te=Ee,Le={namespaced:!0,state:{selectedNode:null,refNodes:[],nodes:[],links:[]},mutations:{SET_SELECTED_NODES:function(e,t){e.selectedNode=t},SET_REF_NODES:function(e,t){e.refNodes=t},ADD_REF_NODES:function(e,t){e.refNodes.push(t)},SET_NODES:function(e,t){e.nodes=t},ADD_NODES:function(e,t){e.nodes.push(t)},SET_LINKS:function(e,t){e.links=t},ADD_LINKS:function(e,t){e.links.push(t)}}},Oe=Le,je={},De=je;i["default"].use(g["a"]);var Ce=new g["a"].Store({state:{},mutations:{},modules:{layer:Te,network:Oe},getters:De}),$e=Ce,Ae=n("ee98"),Ie=n.n(Ae),Re=n("589d"),Pe=n.n(Re),ze=n("2347"),Fe=n.n(ze),Ke=n("5c96"),Ve=n.n(Ke),Me=(n("0fae"),n("fb9a")),We=n.n(Me);n("04f2"),n("c789"),n("5a4b"),n("5717");i["default"].config.productionTip=!1,i["default"].use(Ve.a),i["default"].use(We.a),i["default"].component("downloadCsv",Fe.a),i["default"].use(Ie.a,{velocity:Pe.a}),new i["default"]({store:$e,render:function(e){return e(Se)}}).$mount("#app")},5717:function(e,t,n){},"5a4b":function(e,t,n){},"64f8":function(e,t,n){"use strict";n("25f3")},"652e":function(e,t,n){},6857:function(e,t,n){},"69dc":function(e,t,n){"use strict";n("652e")},"6f06":function(e,t,n){},"747b":function(e,t,n){"use strict";n("c2e4")},"79a0":function(e,t,n){},a560:function(e,t,n){},c2e4:function(e,t,n){},c7cf:function(e,t,n){},c9ba:function(e,t,n){"use strict";n("6857")},d0c8:function(e,t,n){"use strict";n("79a0")}});
//# sourceMappingURL=app.5c123063.js.map